# Tunexa Migration System Environment Configuration
# Copy this to .env and modify according to your setup

# =================================
# üóÑÔ∏è  DATABASE CONFIGURATION
# =================================
DATABASE_URL="file:./database/tunexa.db"
DB_LOGGING=true
DB_SYNCHRONIZE=false  # Always false in production with migrations

# =================================
# üîê MIGRATION SECURITY
# =================================
# Authentication bypass for development
NODE_ENV=development
MIGRATION_AUTH_BYPASS=true

# API Keys for production migration access (comma-separated)
# MIGRATION_API_KEYS="your-secure-api-key-1,your-secure-api-key-2"

# JWT Secret for token-based authentication
# JWT_SECRET="your-super-secret-jwt-key"

# IP whitelist for migration API access (comma-separated, 0.0.0.0 = allow all)
# MIGRATION_ALLOWED_IPS="127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"

# =================================
# üìä MIGRATION CONFIGURATION
# =================================
# Migration file directory
MIGRATION_DIR="./database/migrations"

# Migration table name (for tracking executed migrations)
MIGRATION_TABLE="_tunexa_migrations"

# Auto-run migrations on server start (not recommended for production)
AUTO_RUN_MIGRATIONS=false

# Backup database before running migrations
MIGRATION_BACKUP=true

# Maximum execution time per migration (in milliseconds)
MIGRATION_TIMEOUT=300000  # 5 minutes

# =================================
# üîß PERFORMANCE CONFIGURATION
# =================================
# Enable query result caching
ENABLE_QUERY_CACHE=true

# Cache TTL in seconds
CACHE_TTL=300  # 5 minutes

# Maximum cache size (in MB)
CACHE_MAX_SIZE=100

# Database connection pool configuration
DB_POOL_SIZE=10
DB_POOL_TIMEOUT=30000  # 30 seconds
DB_POOL_IDLE_TIMEOUT=180000  # 3 minutes

# =================================
# üìù LOGGING CONFIGURATION
# =================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Enable SQL query logging
LOG_QUERIES=false

# Enable migration audit logging
MIGRATION_AUDIT_LOG=true

# Log file paths
LOG_FILE="./logs/tunexa.log"
MIGRATION_LOG_FILE="./logs/migrations.log"

# =================================
# üö® MONITORING CONFIGURATION
# =================================
# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# Performance metrics collection interval (in seconds)
METRICS_INTERVAL=60

# Enable health check endpoints
ENABLE_HEALTH_CHECKS=true

# Memory usage alert threshold (in MB)
MEMORY_ALERT_THRESHOLD=512

# =================================
# üåê SERVER CONFIGURATION
# =================================
PORT=3000
API_PREFIX="/api"

# CORS configuration
CORS_ORIGIN="*"
CORS_METHODS="GET,POST,PUT,DELETE,OPTIONS"
CORS_HEADERS="Content-Type,Authorization,X-API-Key"

# Rate limiting
RATE_LIMIT_WINDOW=900000  # 15 minutes
RATE_LIMIT_MAX=100  # requests per window

# =================================
# üß™ TESTING CONFIGURATION
# =================================
# Test database (separate from main database)
TEST_DATABASE_URL="file:./database/tunexa-test.db"

# Run migrations in test environment
TEST_RUN_MIGRATIONS=true

# Reset test database before each test suite
TEST_RESET_DB=true

# =================================
# üîí SECURITY HEADERS
# =================================
# Enable security headers via Helmet
ENABLE_HELMET=true

# Content Security Policy
CSP_ENABLE=true
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'"

# =================================
# üì¶ BUILD CONFIGURATION
# =================================
# Build output directory
BUILD_DIR="./dist"

# Source maps in production
ENABLE_SOURCE_MAPS=false

# Minify production builds
MINIFY_BUILD=true

# =================================
# üöÄ DEPLOYMENT CONFIGURATION
# =================================
# Production deployment settings
# DEPLOYMENT_ENV=production
# DEPLOYMENT_REGION=us-east-1
# DEPLOYMENT_STAGE=production

# Health check URL for load balancers
# HEALTH_CHECK_PATH="/health"

# Graceful shutdown timeout (in seconds)
# SHUTDOWN_TIMEOUT=30

# =================================
# üìà ADVANCED FEATURES
# =================================
# Enable experimental features
ENABLE_EXPERIMENTAL_FEATURES=false

# Background job processing
ENABLE_BACKGROUND_JOBS=false

# Real-time notifications
ENABLE_REALTIME_NOTIFICATIONS=false

# Advanced caching strategies
ENABLE_REDIS_CACHE=false
# REDIS_URL="redis://localhost:6379"

# Database read replicas
ENABLE_READ_REPLICAS=false
# READ_REPLICA_URLS="file:./database/replica1.db,file:./database/replica2.db"

# =================================
# ‚ö° OPTIMIZATION FLAGS
# =================================
# Enable query optimization
ENABLE_QUERY_OPTIMIZATION=true

# Enable connection pooling optimization
ENABLE_CONNECTION_OPTIMIZATION=true

# Enable result set streaming for large queries
ENABLE_RESULT_STREAMING=true

# Batch size for bulk operations
BULK_OPERATION_BATCH_SIZE=1000

# Enable lazy loading optimization
ENABLE_LAZY_LOADING=true

# =================================
# üìä ANALYTICS & METRICS
# =================================
# Enable application metrics collection
ENABLE_METRICS=true

# Metrics collection endpoint
# METRICS_ENDPOINT="http://localhost:9090/metrics"

# Enable business analytics
ENABLE_ANALYTICS=false

# Analytics provider configuration
# ANALYTICS_PROVIDER=google-analytics
# ANALYTICS_TRACKING_ID=GA-XXXXXXX-X